<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yoon</title>
  
  <subtitle>心有猛虎 | 细嗅蔷薇</subtitle>
  <link href="https://yoon404.github.io/atom.xml" rel="self"/>
  
  <link href="https://yoon404.github.io/"/>
  <updated>2022-04-05T04:09:06.597Z</updated>
  <id>https://yoon404.github.io/</id>
  
  <author>
    <name>Yoon</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Docker搭建个人博客--Halo和WordPress</title>
    <link href="https://yoon404.github.io/2022/04/04/Docker%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2-Halo%E5%92%8CWordPress/"/>
    <id>https://yoon404.github.io/2022/04/04/Docker%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2-Halo%E5%92%8CWordPress/</id>
    <published>2022-04-04T02:25:09.000Z</published>
    <updated>2022-04-05T04:09:06.597Z</updated>
    
    
    <summary type="html">&lt;h2 id=&quot;1、Docker安装Halo与MySQL教程&quot;&gt;&lt;a href=&quot;#1、Docker安装Halo与MySQL教程&quot; class=&quot;headerlink&quot; title=&quot;1、Docker安装Halo与MySQL教程&quot;&gt;&lt;/a&gt;1、Docker安装Halo与MySQL教程&lt;/h2&gt;&lt;p&gt;用Docker安装个人博客的好处&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.halo.run/getting-started/install/other/docker-mysql&quot;&gt;Halo官方文档&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x00-创建-Docker-自定义桥接网络&quot;&gt;&lt;a href=&quot;#0x00-创建-Docker-自定义桥接网络&quot; class=&quot;headerlink&quot; title=&quot;0x00 创建 Docker 自定义桥接网络&quot;&gt;&lt;/a&gt;0x00 创建 Docker 自定义桥接网络&lt;/h3&gt;&lt;p&gt;&lt;code&gt;docker network create halo-net&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x01-拉取-MySQL-镜像&quot;&gt;&lt;a href=&quot;#0x01-拉取-MySQL-镜像&quot; class=&quot;headerlink&quot; title=&quot;0x01 拉取 MySQL 镜像&quot;&gt;&lt;/a&gt;0x01 拉取 &lt;code&gt;MySQL&lt;/code&gt; 镜像&lt;/h3&gt;&lt;p&gt;&lt;code&gt;docker pull mysql:8.0.27&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x02-创建-MySQL-数据目录&quot;&gt;&lt;a href=&quot;#0x02-创建-MySQL-数据目录&quot; class=&quot;headerlink&quot; title=&quot;0x02 创建 MySQL 数据目录&quot;&gt;&lt;/a&gt;0x02 创建 &lt;code&gt;MySQL&lt;/code&gt; 数据目录&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@yoon ~]&lt;span class=&quot;comment&quot;&gt;# mkdir -p ~/.halo/mysql&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@yoon ~]&lt;span class=&quot;comment&quot;&gt;# rootdocker run --name halo-mysql -v ~/.halo/mysql:/var/lib/mysql -p 3307:33077 -e MYSQL_ROOT_PASSWORD=123456 --net halo-net --restart=unless-stopped -d mysql:8.0.27&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;释义&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;MYSQL_ROOT_PASSWORD=123455:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;指定MySQL的登录密码为&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;123456&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;~/.halo/mysql:/var/lib/mysql&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;命令:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;将宿主机的目录&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;~/.halo/mysql&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;挂载到容器内部的目录&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;/var/lib/mysql，默认情况下&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;MySQL&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;将向&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;~/.halo/mysql&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;写入其数据文件。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--net&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;halo-net:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;将该容器加入到&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;halo-net&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;网络,连接到&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;halo-net&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;网络的任何其他容器都可以访问&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;halo-mysql容器上的所有端口。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3307&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;:33077&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;将docker的33077端口映射到主机的3307端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;0x03-进入-MySQL-容器中登录-MySQL-并创建-Halo-需要的数据库&quot;&gt;&lt;a href=&quot;#0x03-进入-MySQL-容器中登录-MySQL-并创建-Halo-需要的数据库&quot; class=&quot;headerlink&quot; title=&quot;0x03 进入 MySQL 容器中登录 MySQL 并创建 Halo 需要的数据库&quot;&gt;&lt;/a&gt;0x03 进入 MySQL 容器中登录 MySQL 并创建 Halo 需要的数据库&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;(1) halo-mysql 为 MySQL 实例的容器名称&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;进入halo-mysql容器&lt;/p&gt;
&lt;p&gt;&lt;code&gt;docker exec -it halo-mysql /bin/bash&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;修改&amp;#x2F;etc&amp;#x2F;mysql&amp;#x2F;my.cnf&lt;/p&gt;
&lt;p&gt;① 首先测试容器是否有vim或者vi命令&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://r9ny81buh.hn-bkt.clouddn.com/blog/20200702173145766.png&quot; alt=&quot;七牛&quot;&gt;&lt;/p&gt;
&lt;p&gt;在图中可看到无vim包，&lt;font color=&quot;red&quot;&gt;apt-get换源下载vim&lt;/font&gt;，国内访问镜像站实在是太慢了，所以需要换源，但是因为无法编辑文件，所以需要绕一下。因为该源是不用GPG验证的，可能不安全，但因为docker容器没有验证GPG的工具所以只能先用这个源，最后再换回正式源。&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;复制原文件备份&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv /etc/apt/sources.list /etc/apt/sources.list.bak&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;修改sources.list&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;lt;&amp;lt;EOF &amp;gt;/etc/apt/sources.list&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb http://mirrors.ustc.edu.cn/debian stable main contrib non-free&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb http://mirrors.ustc.edu.cn/debian stable-updates main contrib non-free&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;更新apt&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;安装vim命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt install vim&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;还原sources.list文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv /etc/apt/sources.list.bak /etc/apt/sources.list&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;修改mysql端口号&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/mysql/my.cnf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="docker" scheme="https://yoon404.github.io/categories/docker/"/>
    
    
    <category term="docker" scheme="https://yoon404.github.io/tags/docker/"/>
    
    <category term="blog" scheme="https://yoon404.github.io/tags/blog/"/>
    
  </entry>
  
</feed>
